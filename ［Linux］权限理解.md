![在这里插入图片描述](https://img-blog.csdnimg.cn/5ee93720470047a8b769945644e0cb03.png)
@[TOC](文章目录)
# Linux权限的概念
**Linux下有两种用户：超级用户（root）、普通用户。**
+ **超级用户(root)**：系统中唯一的超级管理员，它具有等同于操作系统的权限。
+ **普通用户**：在linux下做有限的事情。
+ **超级用户的命令提示符是“#”，普通用户的命令提示符是“$”。**

**命令**：su [用户名] 
**功能**：切换用户。
例如，要从root用户切换到普通用户user，则使用 su user。 要从普通用户user切换到root用户则使用 su root（root可以省略），此时系统会提示输入root用户的口令。
![在这里插入图片描述](https://img-blog.csdnimg.cn/f4424aceedfb42e8a66b4ca85cccf351.png)
<br>

# Linux权限管理
## 文件访问者的分类
+ **文件和文件目录的拥有者：u-User**
+ **文件和文件目录的所有者所在的组的用户：g-Group**
+ **其他用户：o-Others**

## 文件类型和访问权限
![在这里插入图片描述](https://img-blog.csdnimg.cn/1ab4f1d0057b4597bd3e663cbaac48dc.png)
**a)文件类型**

> **d: 文件夹
-：普通文件
l：软链接（类似Windows的快捷方式）
b：块设备文件（例如硬盘、光驱等）
p：管道文件
c：字符设备文件（例如屏幕等串口设备）
s：套接口文件**

**b)基本权限**

> **i.读（r/4）：Read对文件而言，具有读取文件内容的权限；对目录来说，具有浏览该目录信息的权限
ii.写（w/2）：Write对文件而言，具有修改文件内容的权限；对目录来说具有删除移动目录内文件的权限
iii.执行（x/1）：execute对文件而言，具有执行文件的权限；对目录来说，具有进入目录的权限
iv.“—”表示不具有该项权限**

![在这里插入图片描述](https://img-blog.csdnimg.cn/64d9ddd276e34677b7c1db4e1e304a9f.png)
## 文件权限值的表示方法
### 字符表示方法
|Linux表示|说明|Linux表示|说明|
|--|--|--|--|
|r - -|只读|-w-|仅可写|
|- -x|仅可执行|rw-|可读可写|
|-wx|可写可执行|r-x|可读可执行|
|rwx|可读可写可执行|- - -|无权限|

### 8进制数值表示方法
|权限符号|八进制|二进制|
|--|--|--|
|r|4|100|
|w|2|010|
|x|1|001|
|rw|6|110|
|rx|5|101|
|wx|3|011|
|rwx|7|111|
|\-\-\-|0|000|

## 文件访问权限的相关设置方法
**a)chmod**
**功能**：设置文件的访问权限，只有文件的拥有者和root才可以改变文件的权限。
**格式**：chmod [参数] 权限 文件名
**常用选项**：R : 递归修改目录文件的权限

chmod命令权限值的格式：

 1. **用户表示符 + / - / =权限字符**
<br>*给拥有者去掉读权限*：
![在这里插入图片描述](https://img-blog.csdnimg.cn/154731845f24463caf47320cbd5b6804.png)
<br>*给拥有者添加读权限*：
![在这里插入图片描述](https://img-blog.csdnimg.cn/608c608e2cad450d88b5814b78b5968b.png)
<br>*给其他人去掉所有权限*：
![在这里插入图片描述](https://img-blog.csdnimg.cn/b9d4d44c521f4c4d9573f99739a8946c.png)


 2. 三位8进制数字
 <br>*给拥有者所属组添加可读可写不可执行权限，其他人添加可读不可写不可执行权限(rw -rw- r--/664)*：
 ![在这里插入图片描述](https://img-blog.csdnimg.cn/16a121376e34480f84e3b9623cd8558c.png)
 
**b)chown**
**功能**：修改文件的拥有者
**格式**：chown [参数] 用户名 文件名
**实例**：

**更改文件的拥有者**：

![在这里插入图片描述](https://img-blog.csdnimg.cn/7f76d7d95ecb4c84a03ccbc3f7d55cff.png)

**说明：普通用户无法随意将文件的拥有者改变，需要加上sudo命令对权限进行短暂提升，但是root超级用户可以随意改变文件的拥有者。**

![在这里插入图片描述](https://img-blog.csdnimg.cn/383ae84ce0f34e7abb3bcb75f6988f84.png)

**c)chgrp**
**功能**：修改文件或目录的所属组
**格式**：chgrp [参数] 用户组名 文件名
**常用选项**：-R 递归修改文件或目录的所属组
**实例**：

**更改文件的所属组：**
![在这里插入图片描述](https://img-blog.csdnimg.cn/7bebfc5ee71c4fb7ae55a75ad707a038.png)
**说明：更改所属组的操作和更改拥有者的操作一样，切换成root超级用户就可以随意改变。**



![在这里插入图片描述](https://img-blog.csdnimg.cn/575528a8b18240e3b1e5f1ebcb7b3d2c.png)

同时更改拥有者和所属组：

![在这里插入图片描述](https://img-blog.csdnimg.cn/fa55ca8d66c04bca81caadec9cb85f6b.png)

**d)umask**
**功能**：查看或修改文件掩码
假设默认权限是mask，则实际创建的出来的文件权限是: mask & ~umask 
**格式**：umask 权限值 
**说明**：将现有的存取权限减去权限掩码后，即可产生建立文件时预设权限。超级用户默认掩码值为0022，普通用户默认为0002。
**实例**：

> **umask 755
umask    //查看
umask 044   //设置**
![在这里插入图片描述](https://img-blog.csdnimg.cn/c564de5387ac469bb7093827a8e899b7.png)


![在这里插入图片描述](https://img-blog.csdnimg.cn/b960c600071c4e338e9dd4e4177ebaae.png)

## file指令：
**功能说明**：辨识文件类型。
**语法**：file [选项] 文件或目录...  
**常用选项**：
+ -c 详细显示指令执行过程，便于排错或分析程序执行的情形。
+ -z 尝试去解读压缩文件的内容

![在这里插入图片描述](https://img-blog.csdnimg.cn/9cf66729f53b4ac0b6d8e2753b5a1a19.png)
<br>
## 目录的权限
+ **可执行权限: 如果目录没有可执行权限, 则无法cd到目录中。**
+ **可读权限: 如果目录没有可读权限, 则无法用ls等命令查看目录中的文件内容。**
+ **可写权限: 如果目录没有可写权限, 则无法在目录中创建文件, 也无法在目录中删除文件。**

场景：只要用户拥有目录的可写权限，用户就可以删除目录中的文件，不论用户是否拥有这个文件的可写权限。

![在这里插入图片描述](https://img-blog.csdnimg.cn/77bb484957aa442e87b4d908d08d9570.png)
这样文件的安全性就会受到威胁，为了解决这个问题，Linux引入了粘滞位的概念。
<br>

## 粘滞位
**需求**：其他人(other)可以在特定的目录下创建文件并可写，但是不允许任何人有删掉文件的权限。
![在这里插入图片描述](https://img-blog.csdnimg.cn/7455352f90354fbebd77c72302c4b22c.png)

当一个目录被设置为"粘滞位",则该目录下的文件只能由
+ **超级管理员删除**
+ **该目录的所有者删除**
+ **该文件的所有者删除**

![在这里插入图片描述](https://img-blog.csdnimg.cn/17455c7c559848c7998adcee444bd020.png)
## 总结

 + **目录的可执行权限是表示你可否在目录下执行命令。**
+ **如果目录没有-x权限，则无法对目录执行任何命令，甚至无法cd 进入目, 即使目录仍然有-r 读权限，而如果目录具有-x权限，但没有-r权限，则用户可以执行命令，可以cd进入目录。但由于没有目录的读权限。所以在目录下，即使可以执行ls命令，但仍然没有权限读出目录下的文档。**

